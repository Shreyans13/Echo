<script lang="ts" context="module">
  export type Rating = 0 | 1 | 2 | 3 | 4 | 5;
  export interface PropType {
    title: string;
    image: string;
    price: number;
    rating: Rating;
  }
</script>

<script lang="ts">
  import { Icon } from "@smui/button";
  import { state } from "../../store/store"
  import type { Action } from "../../types/store";

  interface $$Props extends PropType {}

  export let title: string;
  export let image: string;
  export let price: number;
  export let rating: Rating;

  const addToCart = ():void => {
    let val : Action = {
      type: "ADD_TO_BASKET",
      // item : "added this "
      title: title,
      image: image,
      price: price,
      rating: rating,
    }
    state.evalAction(val)
  } 


  //   export let props: ProductProps;
  //   export let props: ProductProps;
</script>

<div class="product">
  <div class="product__info">
    <p>{title}</p>
    <p class="product__price">
      <small>â‚¹</small>
      <strong>{price}</strong>
    </p>
    <p class="product__rating">
      {#each Array(5) as _, index (index)}
        {#if index < rating}
          <Icon class="material-icons" on>star</Icon>
        {:else}
          <Icon class="material-icons">star_border</Icon>
        {/if}
      {/each}
      <!-- <Icon class="material-icons" on>star</Icon>
      <Icon class="material-icons">star_border</Icon> -->
    </p>
  </div>
  <img src={image} alt="Product Image" srcset="" />
  <button on:click={addToCart}>Add to Basket</button>
</div>

<style>
  .product {
    display: flex;
    flex-direction: column;
    background-color: white;
    z-index: 1;
    align-items: center;
    justify-content: flex-end;
    margin: 10px;
    padding: 20px;
    width: 100%;
    max-height: 500px;
    min-width: 100px;
  }
  .product__info {
    height: 150px;
    margin-bottom: 15px;
  }
  .product__price {
    margin-top: 5px;
    margin-bottom: 5px;
  }
  .product > img {
    max-height: 250px;
    width: 100%;
    object-fit: contain;
    margin-top: 5px;
    margin-bottom: 15px;
  }
  .product__rating {
    color: rgb(255, 183, 0);
    /* margin-bottom: 5px; */
  }
  .product > button {
    background: #f0c14b;
    border: 1px solid;
    margin-top: 10px;
    border-color: #a88734 #9c73e1 #846a29;
    color: #111;
  }
</style>
